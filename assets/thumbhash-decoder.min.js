(()=>{var r,n,o=document,t=Math,Q=t.PI,V=t.cos,X=t.round,Y=t.max,Z=t.min,c={},i=Date.now();function u(t){if(c[t])return c[t];try{var e=(t=>{var e=atob(t),a=e.length,d=new Uint8Array(a);for(P=0;P<a;P++)d[P]=e.charCodeAt(P);var x=(63&(t=d[0]|d[1]<<8|d[2]<<16))/63,z=(t>>6&63)/31.5-1,O=(t>>12&63)/31.5-1,r=(t>>18&31)/31,n=t>>23!=0,t=((p=d[3]|d[4]<<8)>>3&63)/63,o=(p>>9&63)/63,c=Y(3,(s=p>>15!=0)?n?5:7:7&p),i=Y(3,s?7&p:n?5:7),u=1,s=0,h=5,l=0;function f(t,e,a){for(var r,n,o=[],c=0;c<e;c++)for(r=0;r<t;r++)(r||c)&&(n=1&l?d[h+(l>>1)]>>4:15&d[h+(l>>1)],o.push((n/7.5-1)*a),l++);return o}n&&(u=(15&d[5])/15,s=(d[5]>>4&15)/15,h=6);for(var g,b,m,v,L,w,y,_,G,k,W=f(c,i,r),j=f(3,3,1.25*t),B=f(3,3,1.25*o),F=n?f(5,5,s):null,p=0!=((d[0]|d[1]<<8|d[2]<<16)>>23&1),t=(r=0!=((d[3]|d[4]<<8)>>15&1))?p?5:7:7&(d[3]|d[4]<<8>>8),o=r?7&(d[3]|d[4]<<8>>8):p?5:7,D=X(1<(s=(r?32:t)/(r?o:32))?32:32*s),A=X(1<s?32/s:32),E=new Uint8Array(D*A*4),I=Q/A,S=Q/D,C=0;C<A;C++){for(var M=C+.5,H=[],P=0;P<i;P++)H[P]=V(I*M*P);if(L=[V(0),V(I*M),V(I*M*2)],n)for(w=[],P=0;P<5;P++)w[P]=V(I*M*P);for(g=0;g<D;g++){for(var R=g+.5,U=x,J=z,N=O,K=u,T=0,q=0;q<i;q++)for(v=H[q],b=0;b<c;b++)(b||q)&&(U+=W[T++]*V(S*R*b)*v);for(q=T=0;q<3;q++)for(b=0;b<3;b++)(b||q)&&(m=V(S*R*b),J+=j[T]*m*L[q],N+=B[T]*m*L[q],T++);if(n)for(q=T=0;q<5;q++)for(b=0;b<5;b++)(b||q)&&(K+=F[T++]*V(S*R*b)*w[q]);G=(_=(3*U-(k=U-2/3*J)+N)/2)-N,k=k,E[y=4*(C*D+g)]=Y(0,Z(255,X(255*_))),E[1+y]=Y(0,Z(255,X(255*G))),E[2+y]=Y(0,Z(255,X(255*k))),E[3+y]=Y(0,Z(255,X(255*K)))}}return{w:D,h:A,rgba:E}})(t),a=(r||(r=o.createElement("canvas"),n=r.getContext("2d")),r.width=e.w,r.height=e.h,n.createImageData(e.w,e.h));return a.data.set(e.rgba),n.putImageData(a,0,0),c[t]=r.toDataURL()}catch(t){return""}}function d(a){var t,e,r,n;function o(){r.backgroundImage=r.backgroundSize=r.backgroundPosition=r.backgroundRepeat=""}function c(){e.classList&&e.classList.remove("thumbhash-loading"),setTimeout(o,550)}function d(){e.classList&&e.classList.remove("thumbhash-loading"),o()}a._th||(a._th=1,(t=a.getAttribute("data-thumbhash"))&&(t=u(t))&&(e=a.closest("picture")||a,r=e.style,n=Date.now(),r.backgroundImage="url("+t+")",r.backgroundSize="cover",r.backgroundPosition="center",r.backgroundRepeat="no-repeat","PICTURE"===e.tagName&&(r.display="block"),e.classList&&e.classList.add("thumbhash-loading"),a.complete&&a.naturalWidth?d():(a.addEventListener("load",function(){var t=Date.now()-i,e=Date.now()-n;t<1e3||e<50?d():a.decode?a.decode().then(c).catch(c):c()},{once:!0}),a.addEventListener("error",d,{once:!0}))))}function s(t){if(t&&(1===t.nodeType&&"IMG"===t.tagName&&t.hasAttribute("data-thumbhash")&&d(t),t.querySelectorAll))for(var e=t.querySelectorAll("img[data-thumbhash]"),a=0;a<e.length;a++)d(e[a])}new MutationObserver(function(t){for(var e=0;e<t.length;e++)for(var a=t[e].addedNodes,r=0;r<a.length;r++)s(a[r])}).observe(o.documentElement,{childList:!0,subtree:!0}),"loading"!==o.readyState?s(o.body||o.documentElement):o.addEventListener("DOMContentLoaded",function(){s(o.body)})})();